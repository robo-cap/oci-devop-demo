version: 0.1
component: build
timeoutInSeconds: 10000
shell: bash
failImmediatelyOnError: true
env:
  variables:
    key: "value"
  #   key: "value"
  vaultVariables:
    githubToken: "ocid1.vaultsecret.oc1.eu-frankfurt-1.amaaaaaawe6j4fqaxhkfh3clqwhhtrilw4trnn2yc4rlufgjgyoyts5byala"
  # exportedVariables:
  #   - variable
  #   - variable
  #   - variable

# inputArtifacts:
#   - name: artifact-name
#     type: GENERIC_ARTIFACT
#     artifactId: "artifact-ocid"
#     registryId: OCID of the Artifact Registry
#     path: path of the artifact in the Registry
#     version: version of the artifact
#     location: target-location
#   - name: artifact-name


steps:
  - type: Command
    name: starting
    timeoutInSeconds: 60
    command: |
      python3 script.py pending

  - type: Command
    name: first-step
    timeoutInSeconds: 300
    command: |
      cd $OCI_PRIMARY_SOURCE_DIR
      ls -ltr
      env
      exit 1
    onFailure:
      - type: Command
        command: |
          python3 script.py error
        timeoutInSeconds: 60
  
  - type: Command
    name: end
    timeoutInSeconds: 650
    command: |
      python3 script.py success